---
title: 项目图片一键压缩
date: 2019-03-26 16:39:16
tags: vue
categories: vue
---
* 就放到vue分类下把^_^

> 感觉压缩后还是有损的，记录下，唯一的优点应该就是可以一键压缩项目中的所有图片了。。
相关插件地址：
[imagemin](https://github.com/imagemin/imagemin)
[MozJPEG jpg图片压缩插件](https://github.com/mozilla/mozjpeg)
[pngquant png图片压缩插件](https://www.npmjs.com/package/imagemin-pngquant)
### 1.要使用 imagemin，请确保已安装了 Node.js，然后打开终端窗口，cd 到项目的文件夹，并运行以下命令：
```cmd
//安装图片压缩imagemin插件
npm install imagemin
//使用 MozJPEG 插件压缩 JPEG
npm install imagemin-mozjpeg
//使用 pngquant 插件优化 PNG 图像
npm install imagemin-pngquant
```

### 2.然后创建一个名为 imagemin.js 的新文件，并粘贴以下内容：
```js
//下面是引用插件 + 准备压缩的所有图片相对路径
const imagemin = require('imagemin');
const PNGImages = 'assets/images/*.png';
const JPEGImages = 'assets/images/*.jpg';
//压缩后图片存放路径，这个路径当然也可以自定义
const output = 'build/images';
//下面是使用 MozJPEG 插件压缩 JPEG 的js相关配置
const imageminMozjpeg = require('imagemin-mozjpeg');
const optimiseJPEGImages = () =>
  imagemin([JPEGImages], output, {
    plugins: [
      imageminMozjpeg({
        //压缩质量
        quality: 70,
      }),
    ]
  });
optimiseJPEGImages()
  .catch(error => console.log(error));
//下面是使用 pngquant 插件优化 PNG 图像
const imageminPngquant = require('imagemin-pngquant');
const optimisePNGImages = () =>
  imagemin([PNGImages], output, {
    plugins: [
      imageminPngquant({ quality: '65-80' })
    ],
  });
optimiseJPEGImages()
  .then(() => optimisePNGImages())
  .catch(error => console.log(error));
```

最后
在终端中输入`node imagemin.js`来运行这个脚本。这样就会处理所有的 JPEG，png 图像，并将优化过的图像放在 build/images(这个路径当然也可以自定义) 文件夹中。